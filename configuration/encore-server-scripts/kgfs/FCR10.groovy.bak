import org.joda.time.*

String[] strTenure = tenure.toString().split(" ");
int tenureVal = Integer.parseInt(strTenure[0]);
String tenureUnit = strTenure[1];
customer = customerRepository.findCustomer(customerId);
if(customer == null || customer.getDateOfBirth() == null) {
	feeCharge = "0".toBigDecimal();
} else if(amount <= new BigDecimal ("5000")) {
        feeCharge = "0".toBigDecimal();
}  else {
	Date dob = customer.getDateOfBirth();
	LocalDate birthdate = new LocalDate (dob);
	Years ageYear = Years.yearsBetween(birthdate, new LocalDate());
	int age = ageYear.getYears();
	List<String> feeRate1 = new ArrayList<String>();
		feeRate1.add("1.416");
		feeRate1.add("1.487");
		feeRate1.add("1.534");
		feeRate1.add("1.581");
		feeRate1.add("1.617");
		feeRate1.add("1.64");
		feeRate1.add("1.664");
		feeRate1.add("1.676");
		feeRate1.add("1.687");
		feeRate1.add("1.699");
		feeRate1.add("1.723");
		feeRate1.add("1.746");
		feeRate1.add("1.77");
		feeRate1.add("1.817");
		feeRate1.add("1.864");
		feeRate1.add("1.923");
		feeRate1.add("2.006");
		feeRate1.add("2.089");
		feeRate1.add("2.207");
		feeRate1.add("2.325");
		feeRate1.add("2.466");
		feeRate1.add("2.643");
		feeRate1.add("2.832");
		feeRate1.add("3.056");
		feeRate1.add("3.304");
		feeRate1.add("3.599");
		feeRate1.add("3.941");
		feeRate1.add("4.342");
		feeRate1.add("4.803");
		feeRate1.add("5.322");
		feeRate1.add("5.912");
		feeRate1.add("6.561");
		feeRate1.add("7.269");
		feeRate1.add("8.036");
		feeRate1.add("8.838");
		feeRate1.add("9.676");
		feeRate1.add("10.537");
		feeRate1.add("11.434");
		feeRate1.add("12.355");
		feeRate1.add("13.322");
		feeRate1.add("14.337");
		feeRate1.add("15.411");
		feeRate1.add("16.579");
		feeRate1.add("17.853");
		feeRate1.add("19.234");
		feeRate1.add("20.768");
		feeRate1.add("22.455");
		feeRate1.add("0");
		feeRate1.add("0");
		feeRate1.add("0");
		feeRate1.add("0");
	List<String> feeRate2 = new ArrayList<String>();
		feeRate2.add("1.889");
		feeRate2.add("1.934");
		feeRate2.add("1.974");
		feeRate2.add("2.01");
		feeRate2.add("2.042");
		feeRate2.add("2.07");
		feeRate2.add("2.094");
		feeRate2.add("2.114");
		feeRate2.add("2.129");
		feeRate2.add("2.141");
		feeRate2.add("2.147");
		feeRate2.add("2.15");
		feeRate2.add("2.151");
		feeRate2.add("2.162");
		feeRate2.add("2.2");
		feeRate2.add("2.256");
		feeRate2.add("2.33");
		feeRate2.add("2.423");
		feeRate2.add("2.533");
		feeRate2.add("2.661");
		feeRate2.add("2.808");
		feeRate2.add("2.981");
		feeRate2.add("3.19");
		feeRate2.add("3.396");
		feeRate2.add("3.589");
		feeRate2.add("3.807");
		feeRate2.add("4.077");
		feeRate2.add("4.401");
		feeRate2.add("4.779");
		feeRate2.add("5.212");
		feeRate2.add("5.699");
		feeRate2.add("6.239");
		feeRate2.add("6.834");
		feeRate2.add("7.483");
		feeRate2.add("8.186");
		feeRate2.add("8.943");
		feeRate2.add("9.755");
		feeRate2.add("10.62");
		feeRate2.add("11.535");
		feeRate2.add("12.436");
		feeRate2.add("13.306");
		feeRate2.add("14.391");
		feeRate2.add("15.69");
		feeRate2.add("17.203");
		feeRate2.add("18.928");
		feeRate2.add("20.867");
		feeRate2.add("23.014");
		feeRate2.add("24.976");
		feeRate2.add("26.803");
		feeRate2.add("30.072");
		feeRate2.add("33.689");
	List<String> feeRate3 = new ArrayList<String>();
		feeRate3.add("2.734");
		feeRate3.add("2.8");
		feeRate3.add("2.858");
		feeRate3.add("2.911");
		feeRate3.add("2.957");
		feeRate3.add("2.997");
		feeRate3.add("3.031");
		feeRate3.add("3.058");
		feeRate3.add("3.079");
		feeRate3.add("3.094");
		feeRate3.add("3.102");
		feeRate3.add("3.106");
		feeRate3.add("3.114");
		feeRate3.add("3.144");
		feeRate3.add("3.21");
		feeRate3.add("3.303");
		feeRate3.add("3.424");
		feeRate3.add("3.573");
		feeRate3.add("3.748");
		feeRate3.add("3.95");
		feeRate3.add("4.186");
		feeRate3.add("4.463");
		feeRate3.add("4.774");
		feeRate3.add("5.079");
		feeRate3.add("5.384");
		feeRate3.add("5.739");
		feeRate3.add("6.172");
		feeRate3.add("6.686");
		feeRate3.add("7.283");
		feeRate3.add("7.961");
		feeRate3.add("8.72");
		feeRate3.add("9.559");
		feeRate3.add("10.48");
		feeRate3.add("11.481");
		feeRate3.add("12.564");
		feeRate3.add("13.727");
		feeRate3.add("14.97");
		feeRate3.add("16.292");
		feeRate3.add("17.645");
		feeRate3.add("19");
		feeRate3.add("20.41");
		feeRate3.add("22.14");
		feeRate3.add("24.19");
		feeRate3.add("26.556");
		feeRate3.add("29.239");
		feeRate3.add("32.232");
		feeRate3.add("35.262");
		feeRate3.add("38.292");
		feeRate3.add("41.631");
		feeRate3.add("46.656");
		feeRate3.add("0");
	List<String> feeRate4 = new ArrayList<String>();
		feeRate4.add("3.608");
		feeRate4.add("3.692");
		feeRate4.add("3.768");
		feeRate4.add("3.836");
		feeRate4.add("3.895");
		feeRate4.add("3.946");
		feeRate4.add("3.988");
		feeRate4.add("4.022");
		feeRate4.add("4.048");
		feeRate4.add("4.065");
		feeRate4.add("4.074");
		feeRate4.add("4.084");
		feeRate4.add("4.107");
		feeRate4.add("4.163");
		feeRate4.add("4.265");
		feeRate4.add("4.403");
		feeRate4.add("4.578");
		feeRate4.add("4.79");
		feeRate4.add("5.038");
		feeRate4.add("5.327");
		feeRate4.add("5.665");
		feeRate4.add("6.045");
		feeRate4.add("6.458");
		feeRate4.add("6.876");
		feeRate4.add("7.314");
		feeRate4.add("7.827");
		feeRate4.add("8.447");
		feeRate4.add("9.175");
		feeRate4.add("10.013");
		feeRate4.add("10.961");
		feeRate4.add("12.016");
		feeRate4.add("13.18");
		feeRate4.add("14.451");
		feeRate4.add("15.831");
		feeRate4.add("17.318");
		feeRate4.add("18.913");
		feeRate4.add("20.612");
		feeRate4.add("22.38");
		feeRate4.add("24.193");
		feeRate4.add("26.072");
		feeRate4.add("28.105");
		feeRate4.add("30.562");
		feeRate4.add("33.442");
		feeRate4.add("36.742");
		feeRate4.add("40.456");
		feeRate4.add("44.368");
		feeRate4.add("48.449");
		feeRate4.add("52.858");
		feeRate4.add("57.87");
		feeRate4.add("0");
		feeRate4.add("0");
List<String> feeRate5 = new ArrayList<String>();
		feeRate5.add("4.505");
		feeRate5.add("4.607");
		feeRate5.add("4.699");
		feeRate5.add("4.781");
		feeRate5.add("4.852");
		feeRate5.add("4.912");
		feeRate5.add("4.962");
		feeRate5.add("5.001");
		feeRate5.add("5.029");
		feeRate5.add("5.047");
		feeRate5.add("5.062");
		feeRate5.add("5.085");
		feeRate5.add("5.132");
		feeRate5.add("5.221");
		feeRate5.add("5.366");
		feeRate5.add("5.556");
		feeRate5.add("5.793");
		feeRate5.add("6.076");
		feeRate5.add("6.409");
		feeRate5.add("6.797");
		feeRate5.add("7.237");
		feeRate5.add("7.722");
		feeRate5.add("8.249");
		feeRate5.add("8.796");
		feeRate5.add("9.387");
		feeRate5.add("10.082");
		feeRate5.add("10.911");
		feeRate5.add("11.876");
		feeRate5.add("12.979");
		feeRate5.add("14.219");
		feeRate5.add("15.595");
		feeRate5.add("17.106");
		feeRate5.add("18.752");
		feeRate5.add("20.533");
		feeRate5.add("22.449");
		feeRate5.add("24.496");
		feeRate5.add("26.645");
		feeRate5.add("28.875");
		feeRate5.add("31.204");
		feeRate5.add("33.683");
		feeRate5.add("36.416");
		feeRate5.add("39.677");
		feeRate5.add("43.464");
		feeRate5.add("47.768");
		feeRate5.add("52.407");
		feeRate5.add("57.355");
		feeRate5.add("62.743");
		feeRate5.add("68.712");
		feeRate5.add("0");
		feeRate5.add("0");
		feeRate5.add("0");
	for(int i=0; i<=50; i++){
		if(age == i+18 ) {
			if((tenureUnit.equals("WEEK") && tenureVal <= 52) || (tenureUnit.equals("MONTH") && tenureVal <= 12) || (tenureUnit.equals("YEAR") && tenureVal <= 1) || (tenureUnit.equals("QUARTER") && tenureVal <= 4))
				feeCharge = ((amount * new BigDecimal (feeRate1.get(0)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 104) || (tenureUnit.equals("MONTH") && tenureVal <= 24) || (tenureUnit.equals("YEAR") && tenureVal <= 2) || (tenureUnit.equals("QUARTER") && tenureVal <= 8))
				feeCharge = ((amount * new BigDecimal (feeRate2.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 156) || (tenureUnit.equals("MONTH") && tenureVal <= 36) || (tenureUnit.equals("YEAR") && tenureVal <= 3) || (tenureUnit.equals("QUARTER") && tenureVal <= 12))
				feeCharge = ((amount * new BigDecimal (feeRate3.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 208) || (tenureUnit.equals("MONTH") && tenureVal <= 48) || (tenureUnit.equals("YEAR") && tenureVal <= 4) || (tenureUnit.equals("QUARTER") && tenureVal <= 16))
				feeCharge = ((amount * new BigDecimal (feeRate4.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 260) || (tenureUnit.equals("MONTH") && tenureVal <= 60) || (tenureUnit.equals("YEAR") && tenureVal <= 5) || (tenureUnit.equals("QUARTER") && tenureVal <= 20))
				feeCharge = ((amount * new BigDecimal (feeRate5.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
		}
	}
	feeCharge = BigDecimal.valueOf( Math.round(feeCharge.doubleValue()));
}
