import org.joda.time.*

String[] strTenure = tenure.toString().split(" ");
int tenureVal = Integer.parseInt(strTenure[0]);
String tenureUnit = strTenure[1];
customer = customerRepository.findCustomer(customerId);
if(customer == null || customer.getDateOfBirth() == null) {
	feeCharge = "0".toBigDecimal();
} else {
	Date dob = customer.getDateOfBirth();
	LocalDate birthdate = new LocalDate (dob);
	Years ageYear = Years.yearsBetween(birthdate, new LocalDate());
	int age = ageYear.getYears();
	List<String> feeRate1 = new ArrayList<String>();
		feeRate1.add("1.2");
		feeRate1.add("1.26");
		feeRate1.add("1.3");
		feeRate1.add("1.34");
		feeRate1.add("1.37");
		feeRate1.add("1.39");
		feeRate1.add("1.41");
		feeRate1.add("1.42");
		feeRate1.add("1.43");
		feeRate1.add("1.44");
		feeRate1.add("1.46");
		feeRate1.add("1.48");
		feeRate1.add("1.5");
		feeRate1.add("1.54");
		feeRate1.add("1.58");
		feeRate1.add("1.63");
		feeRate1.add("1.7");
		feeRate1.add("1.77");
		feeRate1.add("1.87");
		feeRate1.add("1.97");
		feeRate1.add("2.09");
		feeRate1.add("2.24");
		feeRate1.add("2.4");
		feeRate1.add("2.59");
		feeRate1.add("2.8");
		feeRate1.add("3.05");
		feeRate1.add("3.34");
		feeRate1.add("3.68");
		feeRate1.add("4.07");
		feeRate1.add("4.51");
		feeRate1.add("5.01");
		feeRate1.add("5.56");
		feeRate1.add("6.16");
		feeRate1.add("6.81");
		feeRate1.add("7.49");
		feeRate1.add("8.2");
		feeRate1.add("8.93");
		feeRate1.add("9.69");
		feeRate1.add("10.47");
		feeRate1.add("11.29");
		feeRate1.add("12.15");
		feeRate1.add("13.06");
		feeRate1.add("14.05");
		feeRate1.add("15.13");
		feeRate1.add("16.3");
		feeRate1.add("17.6");
		feeRate1.add("19.03");
		feeRate1.add("0");
		feeRate1.add("0");
		feeRate1.add("0");
		feeRate1.add("0");
	List<String> feeRate2 = new ArrayList<String>();
		feeRate2.add("1.6007");
		feeRate2.add("1.6387");
		feeRate2.add("1.6729");
		feeRate2.add("1.7035");
		feeRate2.add("1.7305");
		feeRate2.add("1.7545");
		feeRate2.add("1.7748");
		feeRate2.add("1.7913");
		feeRate2.add("1.8044");
		feeRate2.add("1.8141");
		feeRate2.add("1.8198");
		feeRate2.add("1.8223");
		feeRate2.add("1.8227");
		feeRate2.add("1.8322");
		feeRate2.add("1.8647");
		feeRate2.add("1.9118");
		feeRate2.add("1.9747");
		feeRate2.add("2.0531");
		feeRate2.add("2.1465");
		feeRate2.add("2.2551");
		feeRate2.add("2.3794");
		feeRate2.add("2.5267");
		feeRate2.add("2.7037");
		feeRate2.add("2.8778");
		feeRate2.add("3.0413");
		feeRate2.add("3.2266");
		feeRate2.add("3.4553");
		feeRate2.add("3.7294");
		feeRate2.add("4.0501");
		feeRate2.add("4.417");
		feeRate2.add("4.8295");
		feeRate2.add("5.2876");
		feeRate2.add("5.7916");
		feeRate2.add("6.3418");
		feeRate2.add("6.9375");
		feeRate2.add("7.579");
		feeRate2.add("8.2665");
		feeRate2.add("8.9998");
		feeRate2.add("9.7756");
		feeRate2.add("10.5389");
		feeRate2.add("11.2766");
		feeRate2.add("12.1956");
		feeRate2.add("13.2964");
		feeRate2.add("14.5786");
		feeRate2.add("16.0411");
		feeRate2.add("17.684");
		feeRate2.add("19.5033");
		feeRate2.add("21.1659");
		feeRate2.add("22.7148");
		feeRate2.add("25.4849");
		feeRate2.add("28.5502");
	List<String> feeRate3 = new ArrayList<String>();
		feeRate3.add("2.3174");
		feeRate3.add("2.3727");
		feeRate3.add("2.4223");
		feeRate3.add("2.4666");
		feeRate3.add("2.5058");
		feeRate3.add("2.54");
		feeRate3.add("2.5686");
		feeRate3.add("2.5918");
		feeRate3.add("2.6097");
		feeRate3.add("2.6223");
		feeRate3.add("2.6292");
		feeRate3.add("2.6322");
		feeRate3.add("2.639");
		feeRate3.add("2.6643");
		feeRate3.add("2.7206");
		feeRate3.add("2.7995");
		feeRate3.add("2.902");
		feeRate3.add("3.0277");
		feeRate3.add("3.176");
		feeRate3.add("3.3474");
		feeRate3.add("3.5476");
		feeRate3.add("3.7822");
		feeRate3.add("4.0454");
		feeRate3.add("4.3041");
		feeRate3.add("4.5629");
		feeRate3.add("4.8637");
		feeRate3.add("5.2308");
		feeRate3.add("5.6665");
		feeRate3.add("6.1719");
		feeRate3.add("6.7465");
		feeRate3.add("7.3895");
		feeRate3.add("8.1009");
		feeRate3.add("8.8811");
		feeRate3.add("9.73");
		feeRate3.add("10.6472");
		feeRate3.add("11.6327");
		feeRate3.add("12.6868");
		feeRate3.add("13.8065");
		feeRate3.add("14.9533");
		feeRate3.add("16.1015");
		feeRate3.add("17.2969");
		feeRate3.add("18.7631");
		feeRate3.add("20.4997");
		feeRate3.add("22.5053");
		feeRate3.add("24.7784");
		feeRate3.add("27.3151");
		feeRate3.add("29.883");
		feeRate3.add("32.4512");
		feeRate3.add("35.2805");
		feeRate3.add("39.5389");
		feeRate3.add("0");
	List<String> feeRate4 = new ArrayList<String>();
		feeRate4.add("3.0575");
		feeRate4.add("3.1291");
		feeRate4.add("3.1934");
		feeRate4.add("3.2506");
		feeRate4.add("3.3007");
		feeRate4.add("3.3441");
		feeRate4.add("3.3801");
		feeRate4.add("3.4087");
		feeRate4.add("3.4302");
		feeRate4.add("3.4447");
		feeRate4.add("3.4524");
		feeRate4.add("3.4606");
		feeRate4.add("3.4806");
		feeRate4.add("3.5277");
		feeRate4.add("3.6142");
		feeRate4.add("3.7312");
		feeRate4.add("3.8797");
		feeRate4.add("4.0592");
		feeRate4.add("4.2694");
		feeRate4.add("4.5148");
		feeRate4.add("4.8004");
		feeRate4.add("5.1227");
		feeRate4.add("5.4733");
		feeRate4.add("5.8269");
		feeRate4.add("6.1979");
		feeRate4.add("6.6332");
		feeRate4.add("7.1583");
		feeRate4.add("7.7756");
		feeRate4.add("8.486");
		feeRate4.add("9.2887");
		feeRate4.add("10.1831");
		feeRate4.add("11.1691");
		feeRate4.add("12.2468");
		feeRate4.add("13.4161");
		feeRate4.add("14.6764");
		feeRate4.add("16.0277");
		feeRate4.add("17.4681");
		feeRate4.add("18.9665");
		feeRate4.add("20.5027");
		feeRate4.add("22.0952");
		feeRate4.add("23.8176");
		feeRate4.add("25.9");
		feeRate4.add("28.3408");
		feeRate4.add("31.1375");
		feeRate4.add("34.2848");
		feeRate4.add("37.5996");
		feeRate4.add("41.0581");
		feeRate4.add("44.7947");
		feeRate4.add("49.0422");
		feeRate4.add("0");
		feeRate4.add("0");
List<String> feeRate5 = new ArrayList<String>();
		feeRate5.add("3.8175");
		feeRate5.add("3.9046");
		feeRate5.add("3.9825");
		feeRate5.add("4.0514");
		feeRate5.add("4.1115");
		feeRate5.add("4.1629");
		feeRate5.add("4.205");
		feeRate5.add("4.2378");
		feeRate5.add("4.2617");
		feeRate5.add("4.2774");
		feeRate5.add("4.2897");
		feeRate5.add("4.3094");
		feeRate5.add("4.349");
		feeRate5.add("4.4242");
		feeRate5.add("4.5471");
		feeRate5.add("4.7085");
		feeRate5.add("4.9094");
		feeRate5.add("5.1494");
		feeRate5.add("5.4317");
		feeRate5.add("5.7605");
		feeRate5.add("6.1334");
		feeRate5.add("6.5443");
		feeRate5.add("6.9903");
		feeRate5.add("7.4538");
		feeRate5.add("7.9551");
		feeRate5.add("8.5438");
		feeRate5.add("9.2463");
		feeRate5.add("10.0646");
		feeRate5.add("10.9995");
		feeRate5.add("12.0503");
		feeRate5.add("13.216");
		feeRate5.add("14.4964");
		feeRate5.add("15.8915");
		feeRate5.add("17.4012");
		feeRate5.add("19.0244");
		feeRate5.add("20.7594");
		feeRate5.add("22.5806");
		feeRate5.add("24.4705");
		feeRate5.add("26.4441");
		feeRate5.add("28.5446");
		feeRate5.add("30.8608");
		feeRate5.add("33.6249");
		feeRate5.add("36.8338");
		feeRate5.add("40.4813");
		feeRate5.add("44.4123");
		feeRate5.add("48.606");
		feeRate5.add("53.1722");
		feeRate5.add("58.2304");
		feeRate5.add("0");
		feeRate5.add("0");
		feeRate5.add("0");
	for(int i=0; i<=50; i++){
		if(age == i+18 ) {
			if((tenureUnit.equals("WEEK") && tenureVal <= 52) || (tenureUnit.equals("MONTH") && tenureVal <= 12) || (tenureUnit.equals("YEAR") && tenureVal <= 1) || (tenureUnit.equals("QUARTER") && tenureVal <= 4))
				feeCharge = ((amount * new BigDecimal (feeRate1.get(0)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 104) || (tenureUnit.equals("MONTH") && tenureVal <= 24) || (tenureUnit.equals("YEAR") && tenureVal <= 2) || (tenureUnit.equals("QUARTER") && tenureVal <= 8))
				feeCharge = ((amount * new BigDecimal (feeRate2.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 156) || (tenureUnit.equals("MONTH") && tenureVal <= 36) || (tenureUnit.equals("YEAR") && tenureVal <= 3) || (tenureUnit.equals("QUARTER") && tenureVal <= 12))
				feeCharge = ((amount * new BigDecimal (feeRate3.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 208) || (tenureUnit.equals("MONTH") && tenureVal <= 48) || (tenureUnit.equals("YEAR") && tenureVal <= 4) || (tenureUnit.equals("QUARTER") && tenureVal <= 16))
				feeCharge = ((amount * new BigDecimal (feeRate4.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
			else if((tenureUnit.equals("WEEK") && tenureVal <= 260) || (tenureUnit.equals("MONTH") && tenureVal <= 60) || (tenureUnit.equals("YEAR") && tenureVal <= 5) || (tenureUnit.equals("QUARTER") && tenureVal <= 20))
				feeCharge = ((amount * new BigDecimal (feeRate5.get(i)))/1000).setScale(2, BigDecimal.ROUND_HALF_UP);
		}
	}
	feeCharge = BigDecimal.valueOf( Math.round(feeCharge.doubleValue()));
}
